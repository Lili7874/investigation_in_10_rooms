/* 
Rozstrzygniƒôcie (ukryta prawda ‚Äì poziom 8)

Sprawca: Anna
Przedmiot sprawcy: Paczka papieros√≥w z korytarza (≈õwie≈ºe niedopa≈Çki; zapach dymu w strefie przy windach ‚Äì oznaka zdenerwowania i palenia mimo zakazu)
Miejsce morderstwa: Sala pacjenta (aparatura wy≈ÇƒÖczona manualnie)

Logika:
‚Ä¢ Podrobiony identyfikator Weroniki wyglƒÖda na oczywisty dow√≥d, ale jego timestamp nie spina siƒô z godzinƒÖ wej≈õcia na oddzia≈Ç.
‚Ä¢ Tomasz krƒôci≈Ç siƒô na OIOM-ie, lecz brak jego ≈õlad√≥w przy sali pacjenta ‚Äì to odciƒÖgacz uwagi.
‚Ä¢ Kacper ma ≈õlady ≈õrodka dezynfekujƒÖcego, ale nie zna≈Ç nazwiska lekarza ‚Äì wpadka, nie sprawstwo.
‚Ä¢ Anna by≈Ça widziana przy pokoju pielƒôgniarek ‚Äì stamtƒÖd mog≈Ça zdobyƒá str√≥j i wej≈õƒá nielegalnie.
‚Ä¢ ≈öwiadek widzia≈Ç osobƒô w rƒôkawiczkach i masce manipulujƒÖcƒÖ przy kropl√≥wce ‚Üí sprawca podszy≈Ç siƒô pod personel.
‚Ä¢ Trop z paczkƒÖ papieros√≥w na korytarzu przy windach ≈ÇƒÖczy siƒô z nerwowym zachowaniem Anny (palenie mimo zakazu) w oknie czasowym zbrodni.
*/

import BaseInvestigationScene from '../BaseInvestigationScene';
import scenaSzpital from '../assets/scenes/scena_szpital.png';

// postacie 
import character1 from '../assets/avatars/anna.png';
import character2 from '../assets/avatars/tomasz.png';
import character3 from '../assets/avatars/weronika.png';
import character4 from '../assets/avatars/kacper.png';
import character5 from '../assets/avatars/marzena.png';

// avatary (ikonki)
import avatar1 from '../assets/avatar_icons/anna_icon.png';
import avatar2 from '../assets/avatar_icons/tomasz_icon.png';
import avatar3 from '../assets/avatar_icons/weronika_icon.png';
import avatar4 from '../assets/avatar_icons/kacper_icon.png';
import avatar5 from '../assets/avatar_icons/marzena_icon.png';

export default class LevelHospital extends BaseInvestigationScene {
  constructor() {
    super('LevelHospital', {
      bgKey: 'bg_hospital',
      bgSrc: scenaSzpital,
      title: 'Szpital w nocy',
      intro: `üñº Sceneria:
Pusta sala szpitalna o≈õwietlona bladym ≈õwiat≈Çem jarzeni√≥wek. ≈Å√≥≈ºka stojƒÖ w r√≥wnych rzƒôdach, na jednym z nich le≈ºy porzucona kropl√≥wka. Na stoliku medycznym rozsypane sƒÖ dokumenty pacjenta, a w tle s≈Çychaƒá monotonne pikniƒôcia aparatury. Na korytarzu unosi siƒô zapach ≈õrodk√≥w dezynfekujƒÖcych i ≈õwie≈ºo zgaszonych papieros√≥w.

üìñ Historia poziomu:
W nocy w szpitalu zginƒÖ≈Ç wa≈ºny pacjent objƒôty policyjnƒÖ ochronƒÖ. Oficjalnie mia≈Ç prze≈ºyƒá operacjƒô i byƒá kluczowym ≈õwiadkiem w procesie, ale kto≈õ wy≈ÇƒÖczy≈Ç aparaturƒô. Cztery osoby mia≈Çy dostƒôp do oddzia≈Çu, ka≈ºda z innym powodem, ale ≈ºadna nie przyznaje siƒô do manipulacji przy sprzƒôcie.

Podejrzani:
‚Ä¢ Anna ‚Äî w≈Ça≈õcicielka firmy jubilerskiej. Powiedzia≈Ça, ≈ºe odwiedza≈Ça ‚Äûdawnego znajomego‚Äù, ale nikt nie widzia≈Ç, by mia≈Ça upowa≈ºnienie. Kto≈õ zauwa≈ºy≈Ç jƒÖ przy pokoju pielƒôgniarek.  
‚Ä¢ Tomasz ‚Äî z≈Çodziejaszek. Zosta≈Ç przywieziony na izbƒô przyjƒôƒá z lekkim urazem, ale szybko ‚ÄûzniknƒÖ≈Ç‚Äù z ≈Ç√≥≈ºka. P√≥≈∫niej widziano go na oddziale intensywnej terapii.  
‚Ä¢ Weronika ‚Äî aktorka. Twierdzi, ≈ºe przygotowywa≈Ça siƒô do roli pielƒôgniarki i uzyska≈Ça zgodƒô na obserwacjƒô. Jej identyfikator okaza≈Ç siƒô podrobiony.  
‚Ä¢ Kacper ‚Äî m≈Çody i impulsywny. Powiedzia≈Ç, ≈ºe szuka≈Ç matki pracujƒÖcej w szpitalu, ale nie potrafi≈Ç podaƒá nazwiska lekarza, kt√≥rego mia≈Ç pytaƒá. Na jego ubraniu by≈Çy ≈õlady ≈õrodka dezynfekujƒÖcego.

≈öwiadek:
‚Ä¢ Marzena ‚Äî sekretarka, kt√≥ra w nocy przywioz≈Ça do szpitala dokumenty firmowe dla jednego z pacjent√≥w. Twierdzi, ≈ºe widzia≈Ça, jak kto≈õ manipulowa≈Ç przy kropl√≥wce, ale nie zdƒÖ≈ºy≈Ça dostrzec twarzy. Jest przekonana, ≈ºe sprawca u≈ºywa≈Ç rƒôkawiczek i maski, wiƒôc m√≥g≈Ç udawaƒá pracownika oddzia≈Çu.

üéØ Cel gracza:
Twoim zadaniem jest przes≈Çuchanie ≈õwiadk√≥w i ustalenie, kto z czw√≥rki podejrzanych mia≈Ç motyw i okazjƒô, by zabiƒá pacjenta. Analizuj sprzeczne alibi, fa≈Çszywe to≈ºsamo≈õci i ≈õlady na oddziale.`,

      // === POZYCJE POSTACI (≈Çuk ‚Äì 5 postaci: 4 podejrzanych + ≈õwiadek) ===
      positions: [
        { x: 0.34 * window.innerWidth, y: 0.52 * window.innerHeight }, // Anna
        { x: 0.50 * window.innerWidth, y: 0.36 * window.innerHeight }, // Tomasz
        { x: 0.60 * window.innerWidth, y: 0.54 * window.innerHeight }, // Weronika
        { x: 0.40 * window.innerWidth, y: 0.64 * window.innerHeight }, // Kacper
        { x: 0.46 * window.innerWidth, y: 0.56 * window.innerHeight }, // Marzena (≈õwiadek)
      ],

      // === POSTACIE ===
      characters: [
        { key: 'character1', src: character1, text: 'Widzia≈Çam co≈õ podejrzanego!', avatar: { key: 'avatar1', src: avatar1 } },  // Anna
        { key: 'character2', src: character2, text: 'Nie wiem, czy mogƒô pom√≥c...', avatar: { key: 'avatar2', src: avatar2 } },   // Tomasz
        { key: 'character3', src: character3, text: 'To by≈Ço straszne!', avatar: { key: 'avatar3', src: avatar3 } },   // Weronika
        { key: 'character4', src: character4, text: 'Kto≈õ tu by≈Ç przed tobƒÖ...', avatar: { key: 'avatar4', src: avatar4 } },   // Kacper
        { key: 'character5', src: character5, text: 'Musisz siƒô po≈õpieszyƒá!', avatar: { key: 'avatar5', src: avatar5 } },   // Marzena
      ],

      // === PRZEDMIOTY (opis + grafika; rozmiar przez scale) ===
      items: [
        {
          key: 'kroplowka',
          name: 'Kropl√≥wka',
          text: 'Linia infuzyjna przy ≈Ç√≥≈ºku ofiary. ≈ölady manipulacji przy zacisku; ≈õwiadek widzia≈Ç tu ‚Äûpracownika‚Äù w rƒôkawiczkach.',
          src: require('../assets/items/kroplowka.png'),
          avatar: { key: 'kroplowka', src: require('../assets/items/kroplowka.png') },
          scale: 0.05,
        },
        {
          key: 'identyfikator_podrobiony',
          name: 'Podrobiony identyfikator',
          text: 'Id Weroniki. Nie zgadza siƒô numer oddzia≈Çu oraz stempel czasu ‚Äì zbyt ‚Äûczyste‚Äù pod≈Ço≈ºenie.',
          src: require('../assets/items/identyfikator.png'),
          avatar: { key: 'identyfikator', src: require('../assets/items/identyfikator.png') },
          scale: 0.05,
        },
        {
          key: 'dokumenty_pacjenta',
          name: 'Dokumenty pacjenta',
          text: 'Rozsypane na stoliku medycznym; brak czƒô≈õci strony z listƒÖ odwiedzin.',
          src: require('../assets/items/dokumenty.png'),
          avatar: { key: 'dokumenty', src: require('../assets/items/dokumenty.png') },
          scale: 0.05,
        },
        {
          key: 'paczka_papierosow',
          name: 'Paczka papieros√≥w z korytarza',
          text: 'Znaleziona przy windach, obok ≈õwie≈ºe niedopa≈Çki; pasuje do kogo≈õ, kto pali≈Ç z nerw√≥w mimo zakazu.',
          src: require('../assets/items/papierosy.png'),
          avatar: { key: 'paczka_papierosow', src: require('../assets/items/papierosy.png') },
          scale: 0.05,
        },
      ],

      // === MIEJSCA (jak itemy ‚Äì interaktywne elementy) ===
      places: [
        {
          key: 'sala_pacjenta',
          name: 'Sala pacjenta',
          text: 'Miejsce zbrodni. Aparatura wy≈ÇƒÖczona manualnie; przy ≈Ç√≥≈ºku ≈õlady po rƒôkawiczkach.',
          src: require('../assets/places/sala_pacjenta.png'),
          avatar: { key: 'sala_pacjenta', src: require('../assets/places/sala_pacjenta.png') },
          scale: 0.05,
        },
        {
          key: 'pokoj_pielegniarek',
          name: 'Pok√≥j pielƒôgniarek',
          text: 'Widziano tu Annƒô. W koszu resztki jednorazowego sprzƒôtu ochronnego.',
          src: require('../assets/places/pokoj_pielegniarek.png'),
          avatar: { key: 'pokoj_pielegniarek', src: require('../assets/places/pokoj_pielegniarek.png') },
          scale: 0.05,
        },
        {
          key: 'oiom',
          name: 'Oddzia≈Ç intensywnej terapii',
          text: 'Tomasz by≈Ç tu widziany; brak jego ≈õlad√≥w przy sali pacjenta.',
          src: require('../assets/places/oiom.png'),
          avatar: { key: 'oiom', src: require('../assets/places/oiom.png') },
          scale: 0.05,
        },
        {
          key: 'korytarz_windy',
          name: 'Korytarz przy windach',
          text: 'Zapach ≈õwie≈ºo zgaszonych papieros√≥w; obok le≈ºa≈Ça paczka papieros√≥w i niedopa≈Çki.',
          src: require('../assets/places/korytarz_windy.png'),
          avatar: { key: 'korytarz_windy', src: require('../assets/places/korytarz_windy.png') },
          scale: 0.05,
        },
      ],

      // === POZYCJE PRZEDMIOT√ìW (kolejno≈õƒá jak w "items") ===
      itemPositions: [
        { x: 0.58 * window.innerWidth, y: 0.44 * window.innerHeight }, // kroplowka
        { x: 0.40 * window.innerWidth, y: 0.46 * window.innerHeight }, // identyfikator_podrobiony
        { x: 0.68 * window.innerWidth, y: 0.60 * window.innerHeight }, // dokumenty_pacjenta
        { x: 0.62 * window.innerWidth, y: 0.73 * window.innerHeight }, // paczka_papierosow
      ],

      // === POZYCJE MIEJSC (kolejno≈õƒá jak w "places") ===
      placePositions: [
        { x: 0.50 * window.innerWidth, y: 0.58 * window.innerHeight }, // sala_pacjenta
        { x: 0.30 * window.innerWidth, y: 0.63 * window.innerHeight }, // pokoj_pielegniarek
        { x: 0.56 * window.innerWidth, y: 0.46 * window.innerHeight }, // oiom
        { x: 0.68 * window.innerWidth, y: 0.68 * window.innerHeight }, // korytarz_windy
      ],

      // listy dla tablicy dedukcji i podpowiedzi w inputach
      deduction: {
        suspects: ['Anna', 'Tomasz', 'Weronika', 'Kacper'],
        places:   ['Sala', 'Pok√≥j', 'OIOM', 'Korytarz'],
        items:    ['Kropl√≥wka', 'Identyfikator', 'Dokumenty', 'Papierosy'],
      },

      // callback po klikniƒôciu ‚ÄûZako≈Ñcz poziom‚Äù
      onDeductionSubmit: ({ suspect, item, place }) => {
        console.log('Gracz wskaza≈Ç:', suspect, item, place);
        // Prawda (poziom 8): Anna + Paczka papieros√≥w z korytarza + Sala pacjenta
      },
    });
  }
}
