// src/scenes/LevelMuseum.js
/* 
Rozstrzygniƒôcie (ukryta prawda ‚Äì poziom 6)

Sprawca: Anna
Przedmiot sprawcy: Dziennik alarm√≥w (wej≈õcie techniczne) ‚Äì kr√≥tka dezaktywacja strefy tu≈º przed alarmem
Miejsce morderstwa: Drzwi awaryjne (cia≈Ço stra≈ºnika znalezione przy wyj≈õciu)

Logika:
‚Ä¢ Dziennik panelu pokazuje kr√≥tkie rozbrojenie strefy przy wej≈õciu technicznym tu≈º przed alarmem ‚Äì dzia≈Çanie osoby znajƒÖcej procedurƒô/kod.
‚Ä¢ ≈öwiadek s≈Çyszy brzƒôk szk≈Ça kilka minut przed alarmem ‚Üí zgrywa siƒô z rozbitym czujnikiem w sali ekspozycji.
‚Ä¢ Nagranie K-4 uchwyca sylwetkƒô zas≈ÇaniajƒÖcƒÖ twarz telefonem przy panelu dok≈Çadnie w oknie czasowym.
‚Ä¢ Lista zaprosze≈Ñ VIP t≈Çumaczy obecno≈õƒá Anny przy wej≈õciu technicznym i daje jej pretekst do poruszania siƒô po zapleczu.
‚Ä¢ Tomasz widziany przy magazynie to mylƒÖcy trop; brak ≈õlad√≥w ingerencji w sejfy tej nocy.
*/

import BaseInvestigationScene from '../BaseInvestigationScene';
import scenaMuzeum from '../assets/scenes/scena_muzeum.png';

// postacie ‚Äì mapowanie: Anna, Marzena, Kacper, Tomasz, Weronika (≈õwiadek)
import character1 from '../assets/avatars/anna.png';
import character2 from '../assets/avatars/marzena.png';
import character3 from '../assets/avatars/kacper.png';
import character4 from '../assets/avatars/tomasz.png';
import character5 from '../assets/avatars/weronika.png';

// avatary (ikonki)
import avatar1 from '../assets/avatar_icons/anna_icon.png';
import avatar2 from '../assets/avatar_icons/marzena_icon.png';
import avatar3 from '../assets/avatar_icons/kacper_icon.png';
import avatar4 from '../assets/avatar_icons/tomasz_icon.png';
import avatar5 from '../assets/avatar_icons/weronika_icon.png';

export default class LevelMuseum extends BaseInvestigationScene {
  constructor() {
    super('LevelMuseum', {
      bgKey: 'bg_museum',
      bgSrc: scenaMuzeum,
      title: 'Muzeum sztuki w nocy',
      intro: `üñº Sceneria:
Wielka sala muzeum sztuki wsp√≥≈Çczesnej. Na marmurowej pod≈Çodze le≈ºƒÖ rozbite od≈Çamki szk≈Ça z czujnika ruchu, a czerwone ≈õwiat≈Ça alarmu pulsujƒÖ przy suficie. W kƒÖcie b≈Çyska monitor z nagraniem z kamer, na kt√≥rym widaƒá jedynie poruszonƒÖ sylwetkƒô.

üìñ Historia poziomu:
Podczas nocnej ekspozycji dosz≈Ço do kradzie≈ºy jednego z najcenniejszych obraz√≥w w muzeum. Stra≈ºnik znalaz≈Ç cia≈Ço swojego kolegi obok drzwi awaryjnych ‚Äî wyglƒÖda na to, ≈ºe kto≈õ pr√≥bowa≈Ç wynie≈õƒá dzie≈Ço w po≈õpiechu. Dowody wskazujƒÖ, ≈ºe sprawca zna≈Ç uk≈Çad zabezpiecze≈Ñ.

Podejrzani:
‚Ä¢ Anna ‚Äî w≈Ça≈õcicielka firmy jubilerskiej. Twierdzi, ≈ºe przysz≈Ça na zaproszenie dyrektora muzeum, ale zaprzecza, by mia≈Ça dostƒôp do strefy alarmowej. ≈öwiadkowie widzieli, jak rozmawia≈Ça przez telefon przy wej≈õciu technicznym.  
‚Ä¢ Marzena ‚Äî sekretarka, a w jej torebce znaleziono bilet z datƒÖ wcze≈õniejszej nocy, co budzi pytania, dlaczego wr√≥ci≈Ça ponownie.  
‚Ä¢ Kacper ‚Äî m≈Çody i impulsywny. Powiedzia≈Ç, ≈ºe ‚Äûtylko robi≈Ç zdjƒôcia‚Äù do projektu szkolnego, ale jego aparat zniknƒÖ≈Ç. Kilka zdjƒôƒá pojawi≈Ço siƒô jednak w sieci tu≈º po kradzie≈ºy.  
‚Ä¢ Tomasz ‚Äî drobny z≈Çodziej. By≈Ç widziany w pobli≈ºu sali magazynowej, gdzie przechowywano inne eksponaty. Zaprzecza, ≈ºe mia≈Ç cokolwiek wsp√≥lnego ze znikniƒôciem obrazu, ale stra≈ºnicy znajƒÖ go z wcze≈õniejszych incydent√≥w.

≈öwiadek:
‚Ä¢ Weronika ‚Äî m≈Çoda aktorka. OglƒÖda≈Ça wystawƒô i ƒáwiczy≈Ça do nowej roli kustoszki. Twierdzi, ≈ºe widzia≈Ça cie≈Ñ przemykajƒÖcy korytarzem, ale nie rozpozna≈Ça osoby. Dodaje, ≈ºe s≈Çysza≈Ça brzƒôk szk≈Ça kilka minut przed alarmem.

üéØ Cel gracza:
Twoim zadaniem jest ustalenie, kto zna≈Ç zabezpieczenia i mia≈Ç okazjƒô, by ukra≈õƒá obraz. Przes≈Çuchaj ≈õwiadk√≥w, zwr√≥ƒá uwagƒô na sprzeczno≈õci w alibi i zdecyduj, kt√≥ry z czterech podejrzanych stoi za kradzie≈ºƒÖ i ≈õmierciƒÖ stra≈ºnika.`,

      // === POZYCJE POSTACI (≈Çuk ‚Äì 5 postaci: 4 podejrzanych + ≈õwiadek) ===
      positions: [
        { x: 0.40 * window.innerWidth, y: 0.58 * window.innerHeight }, // Anna
        { x: 0.46 * window.innerWidth, y: 0.44 * window.innerHeight }, // Marzena
        { x: 0.58 * window.innerWidth, y: 0.70 * window.innerHeight }, // Kacper
        { x: 0.50 * window.innerWidth, y: 0.70 * window.innerHeight }, // Tomasz
        { x: 0.50 * window.innerWidth, y: 0.38 * window.innerHeight }, // Weronika (≈õwiadek)
      ],

      // === POSTACIE ===
      characters: [
        { key: 'character1', src: character1, text: 'By≈Çam zaproszona ‚Äî tylko rozmawia≈Çam przez telefon.', avatar: { key: 'avatar1', src: avatar1 } }, // Anna
        { key: 'character2', src: character2, text: 'Przysz≈Çam drugi raz, bo‚Ä¶ chcia≈Çam jeszcze raz zobaczyƒá ekspozycjƒô.', avatar: { key: 'avatar2', src: avatar2 } }, // Marzena
        { key: 'character3', src: character3, text: 'Robi≈Çem zdjƒôcia do projektu! M√≥j aparat zniknƒÖ≈Ç!', avatar: { key: 'avatar3', src: avatar3 } }, // Kacper
        { key: 'character4', src: character4, text: 'Nie mam z tym nic wsp√≥lnego, serio.', avatar: { key: 'avatar4', src: avatar4 } }, // Tomasz
        { key: 'character5', src: character5, text: 'S≈Çysza≈Çam brzƒôk szk≈Ça, zanim zawy≈Ç alarm‚Ä¶', avatar: { key: 'avatar5', src: avatar5 } }, // Weronika
      ],

      // === PRZEDMIOTY (4) ===
      items: [
        {
          key: 'dziennik_alarmow',
          name: 'Dziennik alarm√≥w (wej≈õcie techniczne)',
          text: 'Kr√≥tka dezaktywacja strefy tu≈º przed alarmem; log wskazuje na panel przy wej≈õciu technicznym.',
          src: require('../assets/items/dziennik_alarmow.png'),
          avatar: { key: 'dziennik_alarmow', src: require('../assets/items/dziennik_alarmow.png') },
          scale: 0.05,
        },
        {
          key: 'odlamki_czujnika',
          name: 'Od≈Çamki czujnika ruchu',
          text: 'Szk≈Ço z os≈Çony czujnika w sali ekspozycji; ≈õwiadek s≈Çysza≈Ç brzƒôk kilka minut przed alarmem.',
          src: require('../assets/items/odlamki.png'),
          avatar: { key: 'odlamki_czujnika', src: require('../assets/items/odlamki.png') },
          scale: 0.05,
        },
        {
          key: 'nagranie_k4',
          name: 'Nagranie K-4 (korytarz techniczny)',
          text: 'Poruszona sylwetka przy panelu; twarz zas≈Çoniƒôta telefonem.',
          src: require('../assets/items/kamera.png'),
          avatar: { key: 'nagranie_k4', src: require('../assets/items/kamera.png') },
          scale: 0.05,
        },
        {
          key: 'lista_vip',
          name: 'Lista zaprosze≈Ñ VIP',
          text: 'Nazwisko Anny figuruje jako go≈õƒá dyrektora ‚Äî pretekst do obecno≈õci przy wej≈õciu technicznym.',
          src: require('../assets/items/lista_vip.png'),
          avatar: { key: 'lista_vip', src: require('../assets/items/lista_vip.png') },
          scale: 0.05,
        },
      ],

      // === MIEJSCA (4) ===
      places: [
        {
          key: 'sala_ekspozycji',
          name: 'Sala g≈Ç√≥wna ekspozycji',
          text: 'Rozbity czujnik; punkt startowy kradzie≈ºy obrazu.',
          src: require('../assets/places/sala_ekspozycji.png'),
          avatar: { key: 'sala_ekspozycji', src: require('../assets/places/sala_ekspozycji.png') },
          scale: 0.05,
        },
        {
          key: 'drzwi_awaryjne',
          name: 'Drzwi awaryjne',
          text: 'Miejsce znalezienia cia≈Ça stra≈ºnika; po≈õpieszna pr√≥ba wyniesienia ≈Çupu.',
          src: require('../assets/places/drzwi_awaryjne.png'),
          avatar: { key: 'drzwi_awaryjne', src: require('../assets/places/drzwi_awaryjne.png') },
          scale: 0.05,
        },
        {
          key: 'wejscie_techniczne',
          name: 'Wej≈õcie techniczne (panel)',
          text: 'Panel alarmu; log rozbrojenia odpowiada temu punktowi.',
          src: require('../assets/places/wejscie_techniczne.png'),
          avatar: { key: 'wejscie_techniczne', src: require('../assets/places/wejscie_techniczne.png') },
          scale: 0.05,
        },
        {
          key: 'magazyn_zaplecze',
          name: 'Magazyn / zaplecze',
          text: 'Widziano tu Tomasza; brak ≈õlad√≥w przy sejfach tej nocy.',
          src: require('../assets/places/magazyn_zaplecze.png'),
          avatar: { key: 'magazyn_zaplecze', src: require('../assets/places/magazyn_zaplecze.png') },
          scale: 0.05,
        },
      ],

      // === POZYCJE PRZEDMIOT√ìW (kolejno≈õƒá jak w "items") ===
      itemPositions: [
        { x: 0.40 * window.innerWidth, y: 0.44 * window.innerHeight }, // dziennik_alarmow
        { x: 0.59 * window.innerWidth, y: 0.55 * window.innerHeight }, // odlamki_czujnika
        { x: 0.45 * window.innerWidth, y: 0.65 * window.innerHeight }, // nagranie_k4
        { x: 0.62 * window.innerWidth, y: 0.68 * window.innerHeight }, // lista_vip
      ],

      // === POZYCJE MIEJSC (kolejno≈õƒá jak w "places") ===
      placePositions: [
        { x: 0.64 * window.innerWidth, y: 0.50 * window.innerHeight }, // sala_ekspozycji
        { x: 0.55 * window.innerWidth, y: 0.40 * window.innerHeight }, // drzwi_awaryjne
        { x: 0.40 * window.innerWidth, y: 0.38 * window.innerHeight }, // wejscie_techniczne
        { x: 0.36 * window.innerWidth, y: 0.74 * window.innerHeight }, // magazyn_zaplecze
      ],

      // listy dla tablicy dedukcji i podpowiedzi w inputach
      deduction: {
        suspects: ['Anna', 'Marzena', 'Kacper', 'Tomasz'],
        places:   ['Sala', 'Awaryjne', 'Techniczne', 'Magazyn'],
        items:    ['Dziennik', 'Od≈Çamki', 'Nagranie', 'VIP lista'],
      },

      // callback po klikniƒôciu ‚ÄûZako≈Ñcz poziom‚Äù
      onDeductionSubmit: ({ suspect, item, place }) => {
        console.log('Gracz wskaza≈Ç:', suspect, item, place);
        // Prawda (poziom 6): Anna + Dziennik alarm√≥w (wej≈õcie techniczne) + Drzwi awaryjne
      },
    });
  }
}
